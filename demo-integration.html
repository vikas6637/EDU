<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Integration Demo - Educare Institute</title>
    
    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- CSS and JS files -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/login.css">
    <script src="js/user-session.js" defer></script>
    
    <style>
        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .demo-section {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .demo-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .demo-header h1 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .demo-header p {
            color: var(--text-muted);
            font-size: 1.1em;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .feature-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
        }
        
        .feature-card h3 {
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .feature-card p {
            color: var(--text-dark);
            line-height: 1.6;
        }
        
        .demo-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 30px 0;
        }
        
        .demo-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .demo-btn.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .demo-btn.secondary {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }
        
        .demo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-online { background: #28a745; }
        .status-offline { background: #dc3545; }
        
        .user-status {
            background: var(--background-light);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }
        
        .user-status h3 {
            margin-bottom: 15px;
            color: var(--text-dark);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }
        
        .user-avatar {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5em;
        }
        
        .user-details {
            text-align: left;
        }
        
        .user-name {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 5px;
        }
        
        .user-role {
            color: var(--text-muted);
            font-size: 0.9em;
        }
        
        .integration-steps {
            background: var(--background-light);
            padding: 25px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .integration-steps h3 {
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .step {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 6px;
            border-left: 3px solid var(--primary);
        }
        
        .step-number {
            background: var(--primary);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }
        
        .step-content h4 {
            margin-bottom: 8px;
            color: var(--text-dark);
        }
        
        .step-content p {
            color: var(--text-muted);
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <div class="demo-header">
            <h1>üîê Login System Integration Demo</h1>
            <p>See how the login system seamlessly integrates with the main website</p>
        </div>
        
        <!-- User Status Section -->
        <div class="demo-section">
            <h2>üë§ Current User Status</h2>
            <div class="user-status">
                <h3>Session Information</h3>
                <div id="userStatusContent">
                    <p>Loading user status...</p>
                </div>
            </div>
        </div>
        
        <!-- Integration Features -->
        <div class="demo-section">
            <h2>‚ú® Integration Features</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3><i class="fas fa-sync-alt"></i> Seamless Navigation</h3>
                    <p>Users can navigate between the main website and login system without losing their session. The navigation automatically updates to show user status.</p>
                </div>
                
                <div class="feature-card">
                    <h3><i class="fas fa-user-circle"></i> Dynamic User Menu</h3>
                    <p>When logged in, the login button transforms into a user menu with options to access dashboard, return home, or logout.</p>
                </div>
                
                <div class="feature-card">
                    <h3><i class="fas fa-home"></i> Back to Home</h3>
                    <p>Every page in the login system has a "Back to Home" button, allowing users to return to the main website at any time.</p>
                </div>
                
                <div class="feature-card">
                    <h3><i class="fas fa-shield-alt"></i> Session Management</h3>
                    <p>User sessions are maintained across all pages using localStorage, providing a consistent experience throughout the website.</p>
                </div>
            </div>
        </div>
        
        <!-- Demo Buttons -->
        <div class="demo-section">
            <h2>üß™ Test the Integration</h2>
            <div class="demo-buttons">
                <a href="index.html" class="demo-btn primary">
                    <i class="fas fa-home"></i>
                    Go to Main Website
                </a>
                <a href="login.html" class="demo-btn secondary">
                    <i class="fas fa-sign-in-alt"></i>
                    Test Login System
                </a>
                <a href="test-login.html" class="demo-btn secondary">
                    <i class="fas fa-vial"></i>
                    Run System Tests
                </a>
            </div>
        </div>
        
        <!-- How It Works -->
        <div class="demo-section">
            <h2>üîß How the Integration Works</h2>
            <div class="integration-steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>User Session Manager</h4>
                        <p>The <code>user-session.js</code> script runs on every page, checking if a user is logged in and updating the navigation accordingly.</p>
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Dynamic Navigation</h4>
                        <p>When a user logs in, the login button is replaced with a user menu showing their name, role, and navigation options.</p>
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Seamless Navigation</h4>
                        <p>Users can navigate between the main website, login pages, and dashboards while maintaining their session state.</p>
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>Back to Home</h4>
                        <p>Every page includes "Back to Home" buttons, ensuring users can always return to the main website easily.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Technical Details -->
        <div class="demo-section">
            <h2>‚öôÔ∏è Technical Implementation</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3><i class="fas fa-code"></i> User Session Manager</h3>
                    <p>A centralized class that manages user sessions across all pages, handling login state, navigation updates, and logout functionality.</p>
                </div>
                
                <div class="feature-card">
                    <h3><i class="fas fa-database"></i> Local Storage</h3>
                    <p>User session data is stored in localStorage using consistent keys (<code>educare_user</code>, <code>educare_session_id</code>).</p>
                </div>
                
                <div class="feature-card">
                    <h3><i class="fas fa-palette"></i> Dynamic UI</h3>
                    <p>The navigation automatically updates based on login status, showing either a login button or user menu with appropriate styling.</p>
                </div>
                
                <div class="feature-card">
                    <h3><i class="fas fa-mobile-alt"></i> Responsive Design</h3>
                    <p>The user menu adapts to mobile devices, providing a consistent experience across all screen sizes.</p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Update user status display
        function updateUserStatus() {
            const statusContent = document.getElementById('userStatusContent');
            
            if (window.userSessionManager && window.userSessionManager.isLoggedIn()) {
                const user = window.userSessionManager.getCurrentUser();
                statusContent.innerHTML = `
                    <div class="user-info">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="user-details">
                            <div class="user-name">${user.full_name || 'User'}</div>
                            <div class="user-role">${user.role || 'User'}</div>
                        </div>
                    </div>
                    <p><span class="status-indicator status-online"></span>Logged in and active</p>
                `;
            } else {
                statusContent.innerHTML = `
                    <div class="user-info">
                        <div class="user-avatar">
                            <i class="fas fa-user-slash"></i>
                        </div>
                        <div class="user-details">
                            <div class="user-name">Guest User</div>
                            <div class="user-role">Not logged in</div>
                        </div>
                    </div>
                    <p><span class="status-indicator status-offline"></span>Not logged in</p>
                `;
            }
        }
        
        // Update status when page loads
        window.addEventListener('load', function() {
            // Wait a bit for user-session.js to load
            setTimeout(updateUserStatus, 500);
        });
        
        // Update status when user logs in/out (if on same page)
        if (window.userSessionManager) {
            // Override the original updateNavigation to also update our demo
            const originalUpdateNavigation = window.userSessionManager.updateNavigation;
            window.userSessionManager.updateNavigation = function() {
                originalUpdateNavigation.call(this);
                updateUserStatus();
            };
        }
    </script>
</body>
</html>
