<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard - Educare Institute</title>
    <link rel="stylesheet" href="css/user-dashboard.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="header-left">
                <div class="logo">
                    <img src="images/logo.png" alt="Educare Institute Logo" class="logo-image">
                    <span class="logo-text">Educare <span class="accent">Institute</span></span>
                </div>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <span class="user-name" id="userName">User</span>
                        <span class="user-role" id="userRole">Student</span>
                    </div>
                </div>
                <div class="notification-indicator" id="notificationIndicator" onclick="toggleNotifications()">
                    <i class="fas fa-bell"></i>
                    <span class="notification-count" id="notificationCount">0</span>
                </div>
                <a href="index.html" class="btn-secondary home-btn">
                    <i class="fas fa-home"></i>
                    <span>Back to Home</span>
                </a>
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Welcome Section -->
        <section class="welcome-section">
            <div class="welcome-content">
                <h1>Welcome back, <span id="welcomeName">User</span>!</h1>
                <p>Continue your learning journey with Educare Institute</p>
                
                <!-- Progress Overview -->
                <div class="progress-overview">
                    <div class="progress-header">
                        <h3>Your Learning Progress</h3>
                        <span class="progress-percentage" id="overallProgress">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-stats">
                        <span>Keep going! You're doing great!</span>
                    </div>
                </div>
                
                <div class="quick-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="totalCourses">0</span>
                        <span class="stat-label">Enrolled Courses</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="completedLessons">0</span>
                        <span class="stat-label">Completed Lessons</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalHours">0</span>
                        <span class="stat-label">Study Hours</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Profile Section -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>My Profile</h2>
                    <button class="btn-secondary" onclick="editProfile()">
                        <i class="fas fa-edit"></i>
                        Edit Profile
                    </button>
                </div>
                <div class="profile-card">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <i class="fas fa-user"></i>
                            <div class="profile-status online"></div>
                        </div>
                        <div class="profile-info">
                            <h3 id="profileName">User Name</h3>
                            <p id="profileEmail">user@example.com</p>
                            <span class="role-badge" id="profileRole">Student</span>
                            <div class="profile-achievements">
                                <span class="achievement-badge">
                                    <i class="fas fa-star"></i>
                                    <span>Top Learner</span>
                                </span>
                                <span class="achievement-badge">
                                    <i class="fas fa-trophy"></i>
                                    <span>Perfect Score</span>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="profile-details">
                        <div class="detail-row">
                            <div class="detail-item">
                                <span class="detail-label">
                                    <i class="fas fa-phone"></i>
                                    Phone
                                </span>
                                <span class="detail-value" id="profilePhone">+1234567890</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">
                                    <i class="fas fa-calendar"></i>
                                    Member Since
                                </span>
                                <span class="detail-value" id="profileJoined">January 2024</span>
                            </div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-item">
                                <span class="detail-label">
                                    <i class="fas fa-clock"></i>
                                    Last Login
                                </span>
                                <span class="detail-value" id="profileLastLogin">Today</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">
                                    <i class="fas fa-map-marker-alt"></i>
                                    Location
                                </span>
                                <span class="detail-value" id="profileLocation">New York, USA</span>
                            </div>
                        </div>
                        <div class="detail-row">
                            <div class="detail-item">
                                <span class="detail-label">
                                    <i class="fas fa-graduation-cap"></i>
                                    Education Level
                                </span>
                                <span class="detail-value" id="profileEducation">High School</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">
                                    <i class="fas fa-language"></i>
                                    Languages
                                </span>
                                <span class="detail-value" id="profileLanguages">English, Spanish</span>
                            </div>
                        </div>
                    </div>
                    <div class="profile-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="profileCourses">5</span>
                            <span class="stat-label">Active Courses</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="profileCertificates">3</span>
                            <span class="stat-label">Certificates</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="profilePoints">1250</span>
                            <span class="stat-label">Learning Points</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Recent Activity -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>Recent Activity</h2>
                    <button class="btn-secondary" onclick="viewAllActivity()">
                        <i class="fas fa-history"></i>
                        View All
                    </button>
                </div>
                <div class="activity-card">
                    <div class="activity-filters" id="activityFilters">
                        <div class="filter-chip active" data-filter="all">All Activities</div>
                        <div class="filter-chip" data-filter="login">Login</div>
                        <div class="filter-chip" data-filter="course">Course</div>
                        <div class="filter-chip" data-filter="content">Content</div>
                        <div class="filter-chip" data-filter="progress">Progress</div>
                    </div>
                    <div class="activity-list" id="userActivityList">
                        <!-- Activity items will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Available Content -->
            <section class="dashboard-section full-width">
                <div class="section-header">
                    <h2>Available Content</h2>
                    <div class="content-filters">
                        <select id="contentFilter">
                            <option value="">All Content</option>
                            <option value="notes">Notes</option>
                            <option value="videos">Videos</option>
                            <option value="images">Images</option>
                            <option value="documents">Documents</option>
                            <option value="assignments">Assignments</option>
                            <option value="quizzes">Quizzes</option>
                        </select>
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Search content..." id="contentSearch">
                        </div>
                        <button class="btn-secondary" onclick="refreshContent()">
                            <i class="fas fa-sync-alt"></i>
                            Refresh
                        </button>
                    </div>
                </div>
                <div class="content-grid" id="contentGrid">
                    <!-- Content items will be loaded here -->
                </div>
            </section>

            <!-- Dashboard Analytics -->
            <section class="dashboard-section full-width">
                <div class="section-header">
                    <h2>Learning Analytics</h2>
                    <div class="analytics-period">
                        <select id="analyticsPeriod">
                            <option value="week">This Week</option>
                            <option value="month" selected>This Month</option>
                            <option value="quarter">This Quarter</option>
                            <option value="year">This Year</option>
                        </select>
                    </div>
                </div>
                <div class="analytics-grid">
                    <div class="analytics-card">
                        <div class="analytics-header">
                            <h3>Study Time Distribution</h3>
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="analytics-chart" id="studyTimeChart">
                            <div class="chart-placeholder">
                                <i class="fas fa-chart-pie"></i>
                                <p>Study time data will appear here</p>
                            </div>
                        </div>
                    </div>
                    <div class="analytics-card">
                        <div class="analytics-header">
                            <h3>Course Progress</h3>
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="course-progress-list" id="courseProgressList">
                            <!-- Course progress items will be loaded here -->
                        </div>
                    </div>
                    <div class="analytics-card">
                        <div class="analytics-header">
                            <h3>Performance Trends</h3>
                            <i class="fas fa-trending-up"></i>
                        </div>
                        <div class="performance-metrics">
                            <div class="metric-item">
                                <span class="metric-label">Average Score</span>
                                <span class="metric-value" id="avgScore">85%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Completion Rate</span>
                                <span class="metric-value" id="completionRate">78%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Study Streak</span>
                                <span class="metric-value" id="studyStreak">12 days</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quick Actions -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>Quick Actions</h2>
                    <button class="btn-secondary" onclick="customizeActions()">
                        <i class="fas fa-cog"></i>
                        Customize
                    </button>
                </div>
                <div class="actions-card">
                    <div class="quick-actions">
                        <button class="action-btn primary" onclick="viewCourses()">
                            <i class="fas fa-book"></i>
                            <span>View Courses</span>
                            <small>Continue learning</small>
                        </button>
                        <button class="action-btn success" onclick="downloadNotes()">
                            <i class="fas fa-download"></i>
                            <span>Download Notes</span>
                            <small>Study materials</small>
                        </button>
                        <button class="action-btn info" onclick="contactSupport()">
                            <i class="fas fa-headset"></i>
                            <span>Contact Support</span>
                            <small>Get help</small>
                        </button>
                        <button class="action-btn warning" onclick="viewProgress()">
                            <i class="fas fa-chart-line"></i>
                            <span>View Progress</span>
                            <small>Track performance</small>
                        </button>
                        <button class="action-btn secondary" onclick="scheduleStudy()">
                            <i class="fas fa-calendar-alt"></i>
                            <span>Schedule Study</span>
                            <small>Plan sessions</small>
                        </button>
                        <button class="action-btn accent" onclick="joinDiscussion()">
                            <i class="fas fa-comments"></i>
                            <span>Join Discussion</span>
                            <small>Connect with peers</small>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Notifications -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>Notifications</h2>
                    <button class="btn-secondary" onclick="markAllRead()">
                        <i class="fas fa-check-double"></i>
                        Mark All Read
                    </button>
                </div>
                <div class="notifications-card">
                    <div class="notifications-list" id="notificationsList">
                        <!-- Notifications will be loaded here -->
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Edit Profile Modal -->
    <div class="modal" id="editProfileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Profile</h3>
                <button class="modal-close" onclick="closeModal('editProfileModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="editProfileForm">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="editFullName" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="editEmail" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" id="editPhone" placeholder="Enter your phone number">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal('editProfileModal')">Cancel</button>
                        <button type="submit" class="btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loader">
            <div class="spinner"></div>
            <p>Loading...</p>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

            <script src="js/user-dashboard.js"></script>
        <script src="js/logout-utility.js"></script>
    </body>
</html>
